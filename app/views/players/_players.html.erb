<%= hidden_field_tag :direction, params[:direction] %>
<%= hidden_field_tag :sort, params[:sort] %>

<table class="table table-striped table-bordered table-condensed">
	<thead><tr>
		<th><%= sortable "name", "Namn"%></th>
		<th><%= sortable "team_id", "Lag" %></th>
		<th><%= sortable "points" , "Poäng" %></th>
		<th><%= sortable "goals" , "Mål" %></th>
		<th><%= sortable "assists" %></th>	
		<th><%= sortable "yellow" , "Gula" %></th>
		<th><%= sortable "red" , "Röda" %></th>		
	</tr></thead >

<% for player in @players %>
	<% player_stats = player.player_stats.find_by_player_id_and_round(player.id, params[:round]); %>
	<tbody><tr>
		<td><%= link_to player.name, player_path(player)  %></td>
		<td><%= Team.find(player.team_id).name %></td>

		<% if params[:round] == nil %>
			<td><%= PlayerStat.where(:player_id => player.id).sum(:points) %></td>
			<td><%= PlayerStat.where(:player_id => player.id).sum(:goals) %></td>
			<td><%= PlayerStat.where(:player_id => player.id).sum(:assists) %></td>
			<td><%= PlayerStat.where(:player_id => player.id).sum(:yellow) %></td>
			<td><%= PlayerStat.where(:player_id => player.id).sum(:red) %></td>
		<% else %>
			<td><%= player_stats.points %></td>
			<td><%= player_stats.goals %></td>
			<td><%= player_stats.assists %></td>
			<td><%= player_stats.yellow %></td>
			<td><%= player_stats.red %></td>
		<% end %>
	</tr></tbody>
<% end %>

</table>
<%= will_paginate @players, :renderer => PaginationListLinkRenderer %>